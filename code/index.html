<!DOCTYPE html>
<!--
    Copyright (C) 2014 Jose F. Maldonado
    This file is part of ngAddressBook.

    ngAddressBook is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ngAddressBook is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ngAddressBook. If not, see <http://www.gnu.org/licenses/>.
-->
<html lang="en" ng-app="addressBookApp">
<head>
    <title>ngAddressBook</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <link href='http://fonts.googleapis.com/css?family=Pacifico' rel='stylesheet' type='text/css' />
    
    <!-- Bootstrap -->
    <script src="lib/jquery.min.js" type="text/javascript"></script>
    <script src="lib/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="lib/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet" />

    <!-- AngularJS -->
    <script src="lib/angular.min.js" type="text/javascript"></script>

    <!-- PouchDB -->
    <script src="lib/pouchdb-5.3.2.min.js" type="text/javascript"></script>

    <!-- Libraries for download files -->
    <script src="lib/Blob.js" type="text/javascript"></script>
    <script src="lib/FileSaver.js" type="text/javascript"></script>

    <!-- App -->
    <link href="css/addressbook.css" rel="stylesheet" />
    <script src="js/addressbook.dal.js" type="text/javascript"></script>
    <script src="js/addressbook.main.js" type="text/javascript"></script>
</head>
<body ng-controller="BookCtrl">

<h1 class="text-center">Address book</h1>

<div ng-show="appState === 'loading'" class="container text-center" id="div_loading_msj">
    <br/><br/><br/>
    <div><img src="img/ajax-loader.gif" alt="" title="Loading"/></div>
    <div>Loading</div>
</div>

<div ng-show="appState === 'list'" class="container" id="div_list_table">
    <div class="panel panel-success">
        <div class="panel-heading">List of contacts</div>
        <table class="table table-striped table-bordered text-center">
             <thead>
                <tr>
                   <th>Name</th>
                   <th>Phone</th>
                   <th>Address</th>
                   <th>E-mail</th>
                   <th>Relative</th>
                   <th></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="friend in friends | orderBy:'name'">
                    <td>{{friend.name}}</td>
                    <td>{{friend.phone}}</td>
                    <td>{{friend.email}}</td>
                    <td>{{friend.address}}</td> 
                    <td>
                        <span class="glyphicon glyphicon-ok" aria-hidden="true" ng-hide="!friend.relative"></span>
                        <span class="glyphicon glyphicon-remove" aria-hidden="true" ng-hide="friend.relative"></span>
                    </td>
                    <td>
                        <button type="submit" class="btn btn-default" ng-click="editEntry(friend._id)" ng-attr-id="list_edit_{{$index}}">Edit</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="text-right">    
        <button type="submit" class="btn btn-default" ng-click="download()" id="list_btn_download" aria-hidden="true" ng-hide="friends.length <= 0">
            <span class="glyphicon glyphicon-download"></span>
            Download CSV
        </button>
        <button type="submit" class="btn btn-default" ng-click="editEntry()" id="list_btn_new">
            <span class="glyphicon glyphicon-plus"></span>
            New contact
        </button>
    </div>
</div> 

<div ng-show="appState === 'edit'" class="row" id="div_edition_form">
    <div class="col-md-3"></div>
    <div class="col-md-6 container">
        <div class="panel panel-default panel-info">
            <div class="panel-heading">Edit person</div>
            <div class="panel-body">
                <form role="form">
                    <div class="form-group">
                        <label for="edition_full_name">Full name</label>
                        <input type="text" class="form-control" id="edition_full_name" placeholder="Enter full name" ng-model="activeEntry.name"/>
                    </div>
                    <div class="form-group">
                        <label for="edition_phone">Phone number</label>
                        <input type="text" class="form-control" id="edition_phone" placeholder="Enter phone number" ng-model="activeEntry.phone" />
                    </div>
                    <div class="form-group">
                        <label for="edition_address">Address</label>
                        <input type="text" class="form-control" id="edition_address" placeholder="Enter phone number" ng-model="activeEntry.address" />
                    </div>
                    <div class="form-group">
                        <label for="edition_email">Email</label>
                        <input type="email" class="form-control" id="edition_email" placeholder="Enter email" ng-model="activeEntry.email" />
                    </div>
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" ng-model="activeEntry.relative" id="edition_relative" />
                            Relative
                        </label>
                    </div>

                    <div class="row">
                        <div class="col-md-4 text-center">
                            <input type="button" class="btn btn-default" ng-click="showList()" id="edition_btn_cancel" value="Cancel"/>
                        </div>
                        <div class="col-md-4 text-center">
                            <input type="button" class="btn btn-default" ng-click="deleteEntry()" id="edition_btn_delete" ng-show="activeEntry._id !== null" value="Delete"/>
                        </div>
                        <div class="col-md-4 text-center">
                            <input type="submit" class="btn btn-default" ng-click="saveEntry()" id="edition_btn_save" value="Save"/>
                        </div>
                    </div>
                </form>
            </div> 
        </div> 
    </div> 
    <div class="col-md-3"></div>
</div>

<br/>


</body>
</html>